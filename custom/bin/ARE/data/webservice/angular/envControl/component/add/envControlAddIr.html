<div>
    <cell-board choose-items="$ctrl.cellBoardConfig"/>
</div>
<div class="clearfix"/>
<h2 translate="{{$ctrl.headerTitle}}" translate-values="{{$ctrl.deviceNameParam}}"/>
<div class="info col-xs-12 col-md-8">
    <i class="fa fa-info-circle fa-2x vcenter"/>
    <span translate="i18n_ec_irmass_infotext_1" translate-values="{{$ctrl.stateI18nParams}}"/>
    <span ng-if="!$ctrl.deviceNameParam" translate="i18n_ec_ir_infotext"/>
    <span ng-if="$ctrl.deviceNameParam" translate="i18n_ec_ir_infotext_device" translate-values="{{$ctrl.deviceNameParam}}"/>
</div>
<div class="clearfix"/>
<p ng-if="$ctrl.isConnected == null">Es wird geprüft ob IrTrans installiert ist...</p>
<asterics-message ng-if="$ctrl.isConnected == false"
                  message-code="IrTrans scheint nicht installiert zu sein, eine Steuerung ist daher im Moment nicht möglich."
                  message-level="warn">
    <a ui-sref="home.envControl.help/install/ir">Zur Installation von IrTrans</a>
</asterics-message>
<div ng-if="$ctrl.isConnected">
    <div class="col-lg-8">
        <ul>
            <li>Geben Sie jeweils den Namen des Befehls an und drücken Sie danach den Button auf der Fernbedienung (in Richtung IrTrans gerichtet).
                Nachdem Sie mindestens einen Befehl gelernt haben, können Sie diesen übernehmen oder einen weiteren hinzufügen.
            </li>
            <li ng-repeat="item in $ctrl.learnItems track by $index">
                Befehl "{{item.name}}" <i class="fa fa-check"/> {{'i18n_ec_irmass_learned' | translate}}
            </li>
            <li ng-model-options="{debounce: 500}">
                <label for="inputLabel">{{'i18n_ec_ir_choosename' | translate}}</label>
                <input type="text" id="inputLabel" ng-model="$ctrl.selectedLabel" maxlength="20"/><br/>
                <div ng-if="$ctrl.selectedLabel">
                    Drücken Sie jetzt "{{$ctrl.selectedLabel}}" einmal kurz auf der Fernbedienung! <span ng-if="!$ctrl.code" class="saving"><span>.</span><span>.</span><span>.</span></span>
                    <br/>
                </div>
            </li>
        </ul>
        <div ng-if="$ctrl.learnItems.length > 0">
            <span translate="i18n_ec_ir_learnsuccess" translate-values="{{$ctrl.getNumLearnedValuesI18n()}}"/><br/>
            <button ng-click="$ctrl.addCellBoardItemAndReturn()">{{'i18n_ec_irmass_finish' | translate}}</button>
        </div>
    </div>
    <a href="#!/home/envcontrol/help/controls/irtrans/{{$ctrl.stateI18nParams.backState}}/{{$ctrl.stateI18nParams.backStateParams}}">
        <div class="col-xs-4 col-md-3 col-lg-2">
            <img src="angular/envControl/img/irtrans.jpg" alt="IrTrans-USB"/>
            <div class=" text-center">IrTrans-USB</div>
        </div>
    </a>
    <a id="end"/>
</div>