<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="resources/favicon.ico" type="image/x-icon">
        <link rel="icon" href="resources/favicon.ico" type="image/x-icon">

        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/button.css">
        <link rel="stylesheet" href="css/animation.css">
        <link rel="stylesheet" href="css/saving-dots.css">
        <link rel="stylesheet" href="resources/font-awesome/css/font-awesome.min.css">
        <link rel="stylesheet" href="resources/bootstrap-3.3.7/css/bootstrap.min.css">
        <title>AsTeRICS Ergo</title>
    </head>

    <body>
        <div id="astericsApp">
            <div id="mainDiv">
                <main-header/>
                <div ui-view=""/>
            </div>
            <a id="end"/>
        </div>

        <!-- libs -->
        <script src="javascript/lib/jquery.min.js"></script>
        <script src="javascript/lib/angular-1.6.0.min.js"></script>
        <script src="javascript/lib/angular-animate.min.js"></script>
        <script src="javascript/lib/angular-ui-router.min.js"></script>
        <script src="javascript/lib/ui-bootstrap-tpls-2.5.0.min.js"></script>
        <script src="javascript/lib/lodash.min.js"></script>
        <script src="resources/bootstrap-3.3.7/js/bootstrap.min.js"></script>
        <script src="javascript/lib/angular-translate.min.js"></script>
        <script src="javascript/lib/contextMenu.js"></script>
        <script src="javascript/lib/angular-qrcode/qrcode.js"></script>
        <script src="javascript/lib/angular-qrcode/qrcode_UTF8.js"></script>
        <script src="javascript/lib/angular-qrcode/angular-qrcode.js"></script>
        <script src="angular/astericsApp.js"></script>

        <!-- i18n -->
        <script src="angular/global/i18n/i18n_global_de.js"></script>
        <script src="angular/global/i18n/i18n_global_en.js"></script>
        <script src="angular/envControl/i18n/i18n_envControl_de.js"></script>
        <script src="angular/envControl/i18n/i18n_envControl_en.js"></script>

        <!-- global -->
        <script src="angular/global/astericsConstants.js"></script>
        <script src="angular/global/service/httpWrapper.js"></script>
        <script src="angular/global/service/areService.js"></script>
        <script src="angular/global/service/areWebsocketService.js"></script>
        <script src="angular/global/service/areSaveService.js"></script>
        <script src="angular/global/service/utilService.js"></script>
        <script src="angular/global/service/messageService.js"></script>
        <script src="angular/global/service/stateUtilService.js"></script>
        <script src="angular/global/component/cellBoard.js"></script>
        <script src="angular/global/component/mainHeader.js"></script>
        <script src="angular/global/component/mainMenu.js"></script>
        <script src="angular/global/component/astericsMessage.js"></script>

        <!-- envControl -->
        <script src="angular/envControl/envControlConstants.js"></script>
        <script src="angular/envControl/envControlPrototypes.js"></script>
        <script src="angular/envControl/envControlRoutes.js"></script>
        <script src="angular/envControl/service/envControlService.js"></script>
        <script src="angular/envControl/service/hardware/hardwareService.js"></script>
        <script src="angular/envControl/service/plug/hardwareFs20Sender.js"></script>
        <script src="angular/envControl/service/infrared/hardwareIrTrans.js"></script>
        <script src="angular/envControl/service/infrared/hardwareFlipMouse.js"></script>
        <script src="angular/envControl/service/envControlUtilService.js"></script>
        <script src="angular/envControl/service/envControlDataService.js"></script>
        <script src="angular/envControl/service/envControlHelpDataService.js"></script>
        <script src="angular/envControl/service/envControlTextService.js"></script>
        <script src="angular/envControl/component/envControlMain.js"></script>
        <script src="angular/envControl/component/envControlContainer.js"></script>
        <script src="angular/envControl/component/addmenu/envControlAdd.js"></script>
        <script src="angular/envControl/component/addmenu/envControlAddMore.js"></script>
        <script src="angular/envControl/component/addmenu/envControlAddSub.js"></script>
        <script src="angular/envControl/component/add/envControlAddMass.js"></script>
        <script src="angular/envControl/component/add/envControlAddFs.js"></script>
        <script src="angular/envControl/component/add/envControlAddIr.js"></script>
        <script src="angular/envControl/component/add/noHardwareFound.js"></script>
        <script src="angular/envControl/component/add/connectionCheck.js"></script>
        <script src="angular/envControl/component/add/hardwareMessage.js"></script>
        <script src="angular/envControl/component/help/envControlHelp.js"></script>
        <script src="angular/envControl/component/help/assistant/envControlHelpSelect.js"></script>
        <script src="angular/envControl/component/help/assistant/envControlNeededHardware.js"></script>
        <script src="angular/envControl/component/help/assistant/hardwareList.js"></script>
        <script src="angular/envControl/component/help/faq/envControlHelpFaq.js"></script>
        <script src="angular/envControl/component/help/faq/envControlFaqDe.js"></script>
        <script src="angular/envControl/component/help/faq/envControlFaqEn.js"></script>
        <script src="angular/envControl/component/help/hardware/hardwareHelpMenu.js"></script>
        <script src="angular/envControl/component/help/install/installHelpMenu.js"></script>
        <script src="angular/envControl/component/help/install/hardwareTest.js"></script>

        <script src="angular/app-bootstrap.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.6.0/annyang.min.js"></script>
        <script>
            if (annyang) {
                // Let's define our first command. First the text we expect, and then the function it should call
                var commands = {
                    'press *command': parseAction,
                    'click *command': parseAction,
                    'go to *command': parseAction,
                    '(go) back': function () {
                        console.log('detected back!');
                        $('button')[1].click();
                    }
                };

                // Add our commands to annyang
                annyang.addCommands(commands);

                /*annyang.addCallback('result', function(phrases) {
                    console.log("I think the user said: ", phrases[0]);
                    console.log("But then again, it could be any of the following: ", phrases);
                });*/

                // Start listening. You can call this here, or attach this call to an event, button, etc.
                annyang.start({ autoRestart: true, continuous: true });


                function parseAction(command) {
                    console.log('detected string: ' + command);
                    var index = parseIndex(command);
                    console.log('index: ' + index);
                    if(index) {
                        $('.subfolder-button, .action-button')[index-1].click();
                    }
                }

                function parseIndex(string) {
                    if(['1', 'one'].includes(string.toLocaleLowerCase())) {
                        return 1;
                    } else if(['2', 'to', 'two'].includes(string.toLocaleLowerCase())) {
                        return 2;
                    } else if(['3', 'three'].includes(string.toLocaleLowerCase())) {
                        return 3;
                    } else if(['4', 'four', 'for'].includes(string.toLocaleLowerCase())) {
                        return 4;
                    } else if(['5', 'five'].includes(string.toLocaleLowerCase())) {
                        return 5;
                    } else if(['6', 'six'].includes(string.toLocaleLowerCase())) {
                        return 6;
                    } else if(['7', 'seven'].includes(string.toLocaleLowerCase())) {
                        return 7;
                    } else if(['8', 'eight'].includes(string.toLocaleLowerCase())) {
                        return 8;
                    } else if(['9', 'nine'].includes(string.toLocaleLowerCase())) {
                        return 9;
                    } else if(['10', 'ten'].includes(string.toLocaleLowerCase())) {
                        return 10;
                    }
                }
            }
        </script>
    </body>
</html>